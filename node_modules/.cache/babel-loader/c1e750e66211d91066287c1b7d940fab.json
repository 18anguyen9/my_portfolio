{"ast":null,"code":"// ==============================\n// Exports asyncfunc sendReq\n// @desc - fetch api wrapper\n// @param {string} url - url\n// @param {object} options - provide method, body, etc.\n// ==============================\nfunction getCookie(name) {\n  let cookieValue = null;\n\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim(); // Does this cookie string begin with the name we want?\n\n      if (cookie.substring(0, name.length + 1) === name + '=') {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n\n  return cookieValue;\n}\n\nasync function sendReq(url, iOptions) {\n  const csrftoken = getCookie('csrftoken');\n  const options = {\n    method: iOptions.method,\n    credentials: 'include',\n    headers: {\n      'X-CSRFToken': csrftoken\n    }\n  };\n\n  if (iOptions.body) {\n    options.body = JSON.stringify(iOptions.body);\n    options.headers['Content-Type'] = 'application/json';\n  }\n\n  const res = await fetch(url, options);\n  const error = res.ok ? false : true;\n  const json = await res.json();\n  const result = {\n    status: res.status,\n    data: json\n  }; // if error, handle with .catch\n\n  if (error) throw result;\n  return result;\n}\n\nexport default sendReq;","map":{"version":3,"names":["getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","sendReq","url","iOptions","csrftoken","options","method","credentials","headers","body","JSON","stringify","res","fetch","error","ok","json","result","status","data"],"sources":["/Users/alexnguyen/Desktop/my_portfolio/src/sendReq.js"],"sourcesContent":["// ==============================\n// Exports asyncfunc sendReq\n// @desc - fetch api wrapper\n// @param {string} url - url\n// @param {object} options - provide method, body, etc.\n// ==============================\n\nfunction getCookie(name) {\n\tlet cookieValue = null;\n\tif (document.cookie && document.cookie !== '') {\n\t\tconst cookies = document.cookie.split(';');\n\t\tfor (let i = 0; i < cookies.length; i++) {\n\t\t\tconst cookie = cookies[i].trim();\n\t\t\t// Does this cookie string begin with the name we want?\n\t\t\tif (cookie.substring(0, name.length + 1) === (name + '=')) {\n\t\t\t\tcookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn cookieValue;\n}\n\nasync function sendReq(url, iOptions) {\n\tconst csrftoken = getCookie('csrftoken');\n\tconst options = {\n\t\tmethod: iOptions.method,\n\t\tcredentials: 'include',\n\t\theaders: {\n\t\t\t'X-CSRFToken': csrftoken\n\t\t}\n\t};\n\tif (iOptions.body) {\n\t\toptions.body = JSON.stringify(iOptions.body);\n\t\toptions.headers['Content-Type'] = 'application/json';\n\t}\n\tconst res = await fetch(url, options);\n\tconst error = res.ok ? false : true;\n\tconst json = await res.json();\n\t\n\tconst result = {\n\t\tstatus: res.status,\n\t\tdata: json\n\t};\n\t// if error, handle with .catch\n\tif (error) throw result;\n\treturn result;\n}\n\nexport default sendReq;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;EACxB,IAAIC,WAAW,GAAG,IAAlB;;EACA,IAAIC,QAAQ,CAACC,MAAT,IAAmBD,QAAQ,CAACC,MAAT,KAAoB,EAA3C,EAA+C;IAC9C,MAAMC,OAAO,GAAGF,QAAQ,CAACC,MAAT,CAAgBE,KAAhB,CAAsB,GAAtB,CAAhB;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;MACxC,MAAMH,MAAM,GAAGC,OAAO,CAACE,CAAD,CAAP,CAAWE,IAAX,EAAf,CADwC,CAExC;;MACA,IAAIL,MAAM,CAACM,SAAP,CAAiB,CAAjB,EAAoBT,IAAI,CAACO,MAAL,GAAc,CAAlC,MAA0CP,IAAI,GAAG,GAArD,EAA2D;QAC1DC,WAAW,GAAGS,kBAAkB,CAACP,MAAM,CAACM,SAAP,CAAiBT,IAAI,CAACO,MAAL,GAAc,CAA/B,CAAD,CAAhC;QACA;MACA;IACD;EACD;;EACD,OAAON,WAAP;AACA;;AAED,eAAeU,OAAf,CAAuBC,GAAvB,EAA4BC,QAA5B,EAAsC;EACrC,MAAMC,SAAS,GAAGf,SAAS,CAAC,WAAD,CAA3B;EACA,MAAMgB,OAAO,GAAG;IACfC,MAAM,EAAEH,QAAQ,CAACG,MADF;IAEfC,WAAW,EAAE,SAFE;IAGfC,OAAO,EAAE;MACR,eAAeJ;IADP;EAHM,CAAhB;;EAOA,IAAID,QAAQ,CAACM,IAAb,EAAmB;IAClBJ,OAAO,CAACI,IAAR,GAAeC,IAAI,CAACC,SAAL,CAAeR,QAAQ,CAACM,IAAxB,CAAf;IACAJ,OAAO,CAACG,OAAR,CAAgB,cAAhB,IAAkC,kBAAlC;EACA;;EACD,MAAMI,GAAG,GAAG,MAAMC,KAAK,CAACX,GAAD,EAAMG,OAAN,CAAvB;EACA,MAAMS,KAAK,GAAGF,GAAG,CAACG,EAAJ,GAAS,KAAT,GAAiB,IAA/B;EACA,MAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACI,IAAJ,EAAnB;EAEA,MAAMC,MAAM,GAAG;IACdC,MAAM,EAAEN,GAAG,CAACM,MADE;IAEdC,IAAI,EAAEH;EAFQ,CAAf,CAjBqC,CAqBrC;;EACA,IAAIF,KAAJ,EAAW,MAAMG,MAAN;EACX,OAAOA,MAAP;AACA;;AAED,eAAehB,OAAf"},"metadata":{},"sourceType":"module"}